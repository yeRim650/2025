# SSH 키 기반 인증 정리

## 1. 개요

SSH 키 기반 인증은 비밀번호 대신 공개 키(Public Key)와 개인 키(Private Key)를 이용하여 SSH 서버에 안전하게 접속하는 방식이다.
패스워드보다 보안성이 뛰어나며, 대부분의 서버 운영 환경, 클라우드 서비스, 개발 플랫폼(GitHub 등)에서 널리 사용된다.

---

## 2. SSH 키란?

SSH 키는 다음 두 가지로 구성된 **비대칭 키 쌍**이다.

* **개인 키 (Private Key)**: 클라이언트(사용자)의 로컬 컴퓨터에 저장. 절대로 외부에 공개되지 않아야 한다.
* **공개 키 (Public Key)**: 서버에 등록되어, 사용자가 정당한 개인 키를 가지고 있는지를 확인하는 용도로 사용된다.

---

## 3. 장점

| 항목         | 설명                                          |
| ---------- | ------------------------------------------- |
| 보안성 강화     | 무차별 대입 공격에 강하고, 복잡한 비밀번호 관리 불필요             |
| 자동화 편의성    | 비밀번호 없이 인증되므로 배포, 스크립트, DevOps 자동화에 유리      |
| 사용자별 관리 용이 | 키 파일을 사용자 단위로 관리할 수 있어 권한 제어가 쉬움            |
| 광범위한 사용 환경 | GitHub, AWS, GCP, 리눅스 서버 등에서 기본 또는 권장 인증 방식 |

---

## 4. SSH 키 생성 방법

### 터미널에서 다음 명령어 실행:

```
ssh-keygen -t rsa -b 4096 -C "your_email@example.com"
```

옵션 설명:

* `-t rsa`: RSA 알고리즘 사용
* `-b 4096`: 4096비트 길이의 키 생성
* `-C`: 키에 대한 설명 (보통 이메일 주소)

생성 경로:

* 개인 키: `~/.ssh/id_rsa`
* 공개 키: `~/.ssh/id_rsa.pub`

---

## 5. 공개 키 등록 방법

### 서버에 등록

1. 로컬에서 공개 키 내용 확인:

   ```
   cat ~/.ssh/id_rsa.pub
   ```

2. 서버에 접속한 후 다음 명령 실행:

   ```
   mkdir -p ~/.ssh
   echo "복사한 공개 키 내용" >> ~/.ssh/authorized_keys
   chmod 700 ~/.ssh
   chmod 600 ~/.ssh/authorized_keys
   ```

### GitHub에 등록

1. GitHub > Settings > SSH and GPG keys로 이동
2. "New SSH key" 클릭
3. 공개 키 내용 붙여넣기 (`id_rsa.pub` 파일의 내용)

---

## 6. 인증 작동 원리

1. 사용자가 SSH 클라이언트로 서버에 접속 요청
2. 서버는 등록된 공개 키가 있는지 확인하고, 인증을 위한 challenge(무작위 문자열)를 생성
3. 클라이언트는 개인 키로 이 challenge에 서명하여 서버에 전송
4. 서버는 등록된 공개 키로 서명을 검증
5. 검증 성공 시 로그인 허용, 실패 시 거부

이 방식은 공개 키로 암호화한 내용은 개인 키 없이는 풀 수 없고, 개인 키로 서명한 것은 공개 키로만 검증 가능하다는 비대칭 암호화의 원리를 이용한다.

---

## 7. 보안 주의사항

* 개인 키(`id_rsa`)는 외부에 절대 노출되지 않도록 관리해야 한다
* 공개 키(`id_rsa.pub`)만 서버나 서비스에 등록해야 한다
* 키가 유출되었을 경우, 서버나 서비스에서 해당 공개 키를 즉시 제거하고 새 키를 발급해야 한다

---

## 8. 관련 개념

* **비대칭 암호화**: 암호화와 복호화에 서로 다른 키(공개 키 / 개인 키)를 사용하는 방식
* **Challenge-Response 방식**: 서버가 무작위 challenge를 보내고, 클라이언트가 개인 키로 응답 서명
* **RSA, ED25519**: SSH 키를 생성할 때 사용되는 암호 알고리즘
* **SHA 해시 함수**: 서명과 데이터 무결성 검증에 사용됨

---

## 9. 요약

SSH 키 기반 인증은 공개 키와 개인 키 쌍을 이용하여 사용자의 신원을 확인하는 방식으로, 비밀번호 기반 인증보다 안전하고 자동화에 적합하다. 서버에 공개 키를 등록하면, 클라이언트는 개인 키만으로 안전하게 접속할 수 있다. 대부분의 현대 개발 환경에서 권장 또는 기본 인증 방식으로 채택되고 있다.

---
